{"version":3,"file":"static/js/969.8b28972c.chunk.js","mappings":"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","sources":["components/auth/login.js","utill/translator.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { API_URL, TOKEN_NAME, doApiRequest } from '../../services/apiService';\r\nimport { verifyToken } from '../../services/apiService';\r\nimport { handleUserInfo } from '../../utill/authService';\r\nimport \"../../css/main.css\";\r\nimport translate from '../../utill/translator';\r\n\r\n\r\nconst Login = () => {\r\n  const dispatch = useDispatch();\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const nav = useNavigate();\r\n  const { formState: { errors } } = useForm();\r\n  const language = useSelector((myStore) => myStore.languageSlice.language);\r\n\r\n  const onSub = (e) => {\r\n    e.preventDefault();\r\n    setIsSubmitted(true);\r\n    const data = {\r\n      email: e.target.email.value,\r\n      password: e.target.password.value\r\n    };\r\n    doApi(data);\r\n  }\r\n\r\n  const doApi = async (_data) => {\r\n    try {\r\n      const url = API_URL + '/auth/login';\r\n      const data = await doApiRequest(url, \"POST\", _data);\r\n\r\n      // Decode the token to access its properties\r\n      if (data.data.token) {\r\n        localStorage.setItem(TOKEN_NAME, data.data.token);\r\n        const decodedToken = data.data.token;\r\n        verifyToken(decodedToken);\r\n      }\r\n\r\n      await handleUserInfo(dispatch);\r\n      if (localStorage.getItem(\"ROLE\") === \"admin\") {\r\n        nav(\"/admin\");\r\n        window.location.reload();\r\n      } else if (localStorage.getItem(\"ROLE\") === \"user\") {\r\n        nav(\"/user\");\r\n        window.location.reload();\r\n      } else {\r\n        nav(\"/\");\r\n      }\r\n    }\r\n    catch (err) {\r\n      console.log(\"err\", err.response.data.msg);\r\n      setIsSubmitted(false);\r\n\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"page-wrapper bg-gra-02 p-t-130 p-b-100 font-poppins container-register\">\r\n      <div className=\"wrapper wrapper--w680\">\r\n        <div className=\"card card-4\">\r\n          <div className=\"card-body\">\r\n            <div className=\"row row-space\">\r\n              <div className=\"col-2\">\r\n                <div className=\"input-group\">\r\n                  <h2 className=\"title label \">{translate('login.login', language)}</h2>\r\n                </div>\r\n              </div>\r\n\r\n              <form onSubmit={(e) => onSub(e)}>\r\n                <div className=\"row row-space\">\r\n                  <div className=\"col-2\">\r\n                    <label className=\"label\" htmlFor=\"email\">\r\n                    {translate('contact.email', language)}\r\n                    </label>\r\n\r\n                    <input\r\n                      name=\"email\"\r\n                      className=\"input--style-4\"\r\n                      type=\"email\"\r\n                      id=\"email\"\r\n                    />\r\n\r\n                  </div>\r\n                  <div className=\"col-2\">\r\n                    <label className=\"label\" htmlFor=\"password\">\r\n                    {translate('user.password', language)}\r\n                    </label>\r\n\r\n                    <input\r\n                      name=\"password\"\r\n                      className=\"input--style-4\"\r\n                      type=\"password\"\r\n                      id=\"password\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"col-12 d-flex justify-content-center mt-5\">\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"btn btn-register col-12 col-md-6 col-lg-4 mx-2\"\r\n                    >\r\n                      {translate('login.login', language)}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","// translator.js\r\nimport enTranslations from '../locals/en.json';\r\nimport heTranslations from '../locals/he.json';\r\n\r\nconst translations = {\r\n  en: enTranslations,\r\n  he: heTranslations,\r\n};\r\n\r\nconst translate = (key, lang) => {\r\n  const keys = key.split('.');\r\n  let currentTranslation = translations[lang];\r\n\r\n  for (const k of keys) {\r\n    if (!currentTranslation || !currentTranslation[k]) {\r\n      return key; // Return the key itself if translation not found\r\n    }\r\n    currentTranslation = currentTranslation[k];\r\n  }\r\n\r\n  return currentTranslation;\r\n};\r\n\r\nexport default translate;\r\n"],"names":["Login","dispatch","useDispatch","isSubmitted","setIsSubmitted","useState","nav","useNavigate","formState","errors","useForm","language","useSelector","myStore","languageSlice","doApi","async","url","API_URL","data","doApiRequest","_data","token","localStorage","setItem","TOKEN_NAME","decodedToken","verifyToken","handleUserInfo","getItem","window","location","reload","err","console","log","response","msg","_jsx","className","children","_jsxs","translate","onSubmit","e","preventDefault","email","target","value","password","onSub","htmlFor","name","type","id","translations","en","he","key","lang","keys","split","currentTranslation","k"],"sourceRoot":""}